<script type="text/javascript">
  function redirect() {
    let originalLocation = window.location.pathname;
    let newLocation = originalLocation;
    // Redirect old wiki main page
    if (newLocation === "/wiki/Main_Page" || newLocation === "/wiki/Main_Page/") {
      newLocation = "/";
    }

    // Redirect old github links
    if (newLocation.startsWith("/burst-wiki")) {
      newLocation = newLocation.replace("/burst-wiki", "")
    }

    // Redirect old links
    if (newLocation.includes("-/")) {
      newLocation = newLocation.replace("-/", "/")
    }
    if (newLocation.includes("---")) {
      newLocation = newLocation.replace("---", "-");
    }
    if (newLocation.includes("--")) {
      newLocation = newLocation.replace("--", "-");
    }

    // Redirect old wiki pages
    let regex = /\/wiki\/([A-Za-z_]+)/;
    let found = newLocation.match(regex);
    if (found !== null && found.length >= 2) {
      let page = found[1].toLowerCase();
      while (page.includes("_")) {
        page = page.replace("_", "-");
      }
      newLocation = "/en/" + page;
    }

    // Do it!
    if (newLocation !== newLocation) {
      window.location.replace(newLocation);
    }
  }
  redirect();
</script>
